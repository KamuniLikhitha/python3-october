class Solution:
    def maxFrequency(self, nums: List[int], k: int, numOperations: int) -> int:
        count=Counter(nums)
        line=defaultdict(int)
        candidates=set()
        for v in nums:
            line[v-k]+=1
            line[v+k+1]-=1
            candidates.add(v)
            candidates.add(v-k)
            candidates.add(v+k+1)
        adjustable=0
        ans=1
        for x in sorted(candidates):
            adjustable+=line.get(x,0)
            cnt_x=count.get(x,0)
            adjustable_others=adjustable-cnt_x
            ans=max(ans,cnt_x+min(numOperations,adjustable_others))
        return ans
